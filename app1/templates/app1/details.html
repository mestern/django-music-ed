{% extends 'parent/base.html' %}
{% load static %}
{% load tags %}
{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/post_detail.css' %}">

<div class="post-container">
    <h1 class="post-title">{{ post.title }}</h1>

    {% if post.image %}
        <img src="{{ post.image.url }}" alt="{{ post.title }}" class="post-image">
    {% endif %}

    <p class="post-author">By: {{ post.auther }}</p>

    <div class="post-description">
        {{ post.description|linebreaks }}
        <a href={{ post.file.url }}>Download</a>
    </div>
    {% music_player post.file.url %}
    {% trends post.file.url %}
       <p class="post-date">Published: {{ post.publish }}</p>
</div>

<link rel="stylesheet" href="{% static 'css/comment.css'%}">

    <div class="comment-section">
      <h2>Leave a Comment</h2>
      <form method="post" class="comment-form" action="{% url 'app1:post_comment' post.id %}">
        {% csrf_token %}
        <div class="form-group">
          <label for="id_name">Name</label>
          {{ form.name }}
          <div class="error">{{ form.name.errors|striptags }}</div>
        </div>
        <div class="form-group">
          <label for="id_message">Message</label>
          {{ form.message }}
          <div class="error">{{ form.message.errors|striptags }}</div>
        </div>
        <button type="submit">Submit Comment</button>
      </form>

      <h3>Comments</h3>
      <div class="comment-list">
        {% for comment in comments %}
          <div class="comment-item">
            <p class="comment-author">{{ comment.name }}</p>
            <p class="comment-message">{{ comment.message|markdown }}</p>
            <p class="comment-date">{{ comment.created|date:"M d, Y H:i" }}</p>
          </div>
        {% empty %}
          <p class="no-comments">No comments yet. Be the first!</p>
        {% endfor %}
      </div>
    </div>


{% endblock %}