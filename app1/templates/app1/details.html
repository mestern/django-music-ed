{% extends 'parent/base.html' %}
{% load static %}
{% load tags %}
{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/post_detail.css' %}">


<div class="post-container">
    <script src="{% static "js/post_details.js" %}" defer></script>
    <h1 class="post-title">{{ post.title }}</h1>

       {% if images %}
      <div class="image-slider">
        <button class="nav-btn prev-btn" onclick="prevImage()">&#10094;</button>
        <div class="image-wrapper">
          {% for img in images %}
            <img src="{{ img.image.url }}" alt="{{ post.title }}" class="post-image slider-image {% if forloop.first %}active{% endif %}">
          {% endfor %}
        </div>
        <button class="nav-btn next-btn" onclick="nextImage()">&#10095;</button>
      </div>
    {% endif %}


    <p class="post-author">By: {{ post.auther }}</p>

    <div class="post-description">
        {{ post.description|linebreaks }}
        {% if post.file %}
          <a href={{ post.file.url }}>Download</a>
            {% music_player post.file.url %}
            {% trends post.file.url %}
        {% endif %}

        {% lorem %}
    </div>

       <p class="post-date">Published: {{ post.publish }}</p>
</div>

<link rel="stylesheet" href="{% static 'css/comment.css'%}">

    <div class="comment-section">
      <h2>Leave a Comment</h2>
      <form method="post" class="comment-form" action="{% url 'app1:post_comment' post.id %}">
        {% csrf_token %}
        <div class="form-group">
          <label for="id_name">Name</label>
          {{ form.name }}
          <div class="error">{{ form.name.errors|striptags }}</div>
        </div>
        <div class="form-group">
          <label for="id_message">Message</label>
          {{ form.message }}
          <div class="error">{{ form.message.errors|striptags }}</div>
        </div>
        <button type="submit">Submit Comment</button>
      </form>

      <h3>Comments</h3>
      <div class="comment-list">
        {% for comment in comments %}
          <div class="comment-item">
            <p class="comment-author">{{ comment.name }}</p>
            <p class="comment-message">{{ comment.message|markdown }}</p>
            <p class="comment-date">{{ comment.created|date:"M d, Y H:i" }}</p>
          </div>
        {% empty %}
          <p class="no-comments">No comments yet. Be the first!</p>
        {% endfor %}
      </div>
    </div>


{% endblock %}